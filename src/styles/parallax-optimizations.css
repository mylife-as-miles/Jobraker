/* Parallax Performance Optimizations */

/* Enable hardware acceleration for parallax elements */
.parallax-element {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
  perspective: 1000px;
  transform-style: preserve-3d;
}

/* Smooth scrolling behavior */
html {
  scroll-behavior: smooth;
}

/* Optimize for different devices */
@media (max-width: 768px) {
  .parallax-element {
    /* Reduce parallax on mobile for better performance */
    transform: none !important;
  }
  
  /* Disable parallax on low-end devices */
  @media (max-resolution: 150dpi) {
    .parallax-element {
      transform: none !important;
    }
  }
}

/* High refresh rate displays */
@media (min-resolution: 120dpi) {
  .parallax-element {
    /* Enhanced smoothness for high-DPI displays */
    transform-origin: center center;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .parallax-element {
    transform: none !important;
    animation: none !important;
    transition: none !important;
  }
  
  html {
    scroll-behavior: auto;
  }
}

/* GPU layer promotion */
.parallax-layer {
  transform: translateZ(0);
  will-change: transform;
  contain: layout style paint;
  isolation: isolate;
}

/* Optimize for different browsers */
@supports (backdrop-filter: blur(10px)) {
  .parallax-backdrop {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
}

/* Performance hints for browsers */
.parallax-container {
  contain: layout style paint;
  transform: translateZ(0);
  will-change: scroll-position;
}

/* Smooth transitions */
.parallax-smooth {
  transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Layer management */
.parallax-background {
  z-index: 1;
  transform: translateZ(-1px) scale(2);
}

.parallax-midground {
  z-index: 10;
  transform: translateZ(-0.5px) scale(1.5);
}

.parallax-foreground {
  z-index: 20;
  transform: translateZ(0);
}

/* Viewport optimizations */
.parallax-viewport {
  overflow-x: hidden;
  overflow-y: auto;
  height: 100vh;
  perspective: 1px;
  transform-style: preserve-3d;
}

/* Browser-specific optimizations */
@supports (-webkit-overflow-scrolling: touch) {
  .parallax-container {
    -webkit-overflow-scrolling: touch;
    -webkit-transform: translateZ(0);
  }
}

/* Firefox optimizations */
@-moz-document url-prefix() {
  .parallax-element {
    transform: translateZ(0.1px);
  }
}

/* Safari optimizations */
@supports (-webkit-appearance: none) {
  .parallax-element {
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
  }
}

/* Edge/IE optimizations */
@supports (-ms-ime-align: auto) {
  .parallax-element {
    -ms-transform: translateZ(0);
  }
}

/* Performance monitoring */
.parallax-debug {
  position: fixed;
  top: 10px;
  right: 10px;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 10px;
  border-radius: 5px;
  font-family: monospace;
  font-size: 12px;
  z-index: 9999;
  pointer-events: none;
}

/* Intersection observer optimizations */
.parallax-observed {
  content-visibility: auto;
  contain-intrinsic-size: 100vh;
}

/* Memory management */
.parallax-offscreen {
  content-visibility: hidden;
  contain: strict;
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .parallax-element {
    /* Simplified transforms for touch devices */
    transform: translateZ(0) !important;
  }
}

/* High contrast mode */
@media (prefers-contrast: high) {
  .parallax-element {
    /* Ensure visibility in high contrast mode */
    filter: contrast(1.2);
  }
}

/* Dark mode optimizations */
@media (prefers-color-scheme: dark) {
  .parallax-element {
    /* Optimize for dark backgrounds */
    mix-blend-mode: screen;
  }
}

/* Print styles */
@media print {
  .parallax-element {
    transform: none !important;
    position: static !important;
  }
}